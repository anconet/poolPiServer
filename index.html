<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>PoolPiGrace</title>
<link href="index.css" rel="stylesheet" type="text/css">

<!-- JQuery Library from Google -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>

<body>
	<header>
		<h2>
			POOL PI
		</h2>
		<nav>
			<ul>
				<li><a name="mode-anchor">MODE</a></li>
				<li><a name="lights-anchor">LIGHTS</a></li>
				<li><a name="info-anchor">TEMP</a></li>
			</ul>
		</nav>
	</header>

	<section class="intro">
		<p class="intro-content">You're only one
		swim away from a
		good mood</p>
	</section>

	<section class="mode" id="mode-anchor">
		<div class="button-div">
	  		<button class="mode-buttons" id="spaModeButton">
	  			SPA
	  		</button>
		</div>
		<h1> mode </h1>
		<div class="button-div">
	  		<button class="mode-buttons" id="poolModeButton">
	  			POOL
	  		</button>
		</div>
	</section>

	<section class="temp-control">
		<p>IN PROGRESS...</p>
	</section>

	<section class="lights">
		<div class="button-div">
	  		<button class="light-buttons">
	  			SPA
	  		</button>
		</div>
		<h1> lights </h1>
		<div class="button-div">
	  		<button class="light-buttons">
	  			POOL
	  		</button>
		</div>
	</section>

	<section class="credits">
		 <p>
		 	by Team Anconetani
		 </p>
	</section>
</body>

<script>
$(document).ready(function(){
	var objEvent = {};
	objEvent.type = "initializeRequest";
	$.post("php/initializationRequest.php", objEvent,function(data){
		console.log (data);
	},"json");
});

	$("#poolModeButton").click(function(){
		var objEvent = {};
		objEvent.type = "buttonPress";
		objEvent.subject = "poolModeButton";
		var objElementID = this;
		$.post( "php/buttonPress.php", objEvent, function(data){processResponse(data,objElementID)}, "json");
	});

	function processResponse(objEventResponse,objElementID) {
		console.log (objEventResponse);
		if (objEventResponse.response == "off") { $(objElementID).removeClass("buttonOn").addClass("buttonOff");}
		else if (objEventResponse.response == "on") { $(objElementID).removeClass("buttonOff").addClass("buttonOn");}
		else { alert("Error: Server Response: " + objEventResponse.response)}
	}
</script>

</html>
